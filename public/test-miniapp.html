<!DOCTYPE html>
<html lang="es-MX">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Mini App - FlashSend CDMX</title>
    
    <!-- Test 1: Meta tag fc:miniapp con comillas dobles escapadas -->
    <meta property="fc:miniapp" content="{\"version\":\"1\",\"image\":\"https://flashsend-cdmx.vercel.app/preview-image.png\",\"button\":{\"text\":\"Abrir FlashSend\"}}" />
    
    <!-- Test 2: Meta tag fc:miniapp con comillas simples -->
    <meta property="fc:miniapp" content='{"version":"1","image":"https://flashsend-cdmx.vercel.app/preview-image.png","button":{"text":"Abrir FlashSend"}}' />
    
    <!-- Test 3: Meta tag fc:miniapp con entidades HTML -->
    <meta property="fc:miniapp" content="&#123;&quot;version&quot;:&quot;1&quot;,&quot;image&quot;:&quot;https://flashsend-cdmx.vercel.app/preview-image.png&quot;,&quot;button&quot;:&#123;&quot;text&quot;:&quot;Abrir FlashSend&quot;&#125;&#125;" />
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="FlashSend CDMX" />
    <meta property="og:description" content="EnvÃ­a pagos rÃ¡pidos y seguros" />
    <meta property="og:image" content="https://flashsend-cdmx.vercel.app/preview-image.png" />
    <meta property="og:url" content="https://flashsend-cdmx.vercel.app" />
    <meta property="og:type" content="website" />
    
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            background: #f5f5f5;
        }
        .test {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        .test h3 {
            color: #007bff;
            margin-top: 0;
        }
        .code {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            font-family: monospace;
            overflow-x: auto;
        }
        .status {
            padding: 8px 12px;
            border-radius: 4px;
            font-weight: bold;
            margin-top: 10px;
        }
        .success { background: #d4edda; color: #155724; }
        .info { background: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body>
    <h1>ðŸ§ª Test de Meta Tags fc:miniapp</h1>
    <p>Esta pÃ¡gina contiene diferentes formatos del meta tag <code>fc:miniapp</code> para probar cuÃ¡l funciona mejor con Farcaster.</p>
    
    <div class="test">
        <h3>Test 1: Comillas dobles escapadas</h3>
        <div class="code">
            &lt;meta property="fc:miniapp" content="{\"version\":\"1\",\"image\":\"https://flashsend-cdmx.vercel.app/preview-image.png\",\"button\":{\"text\":\"Abrir FlashSend\"}}" /&gt;
        </div>
        <div class="status info">Formato: JSON con comillas dobles escapadas</div>
    </div>
    
    <div class="test">
        <h3>Test 2: Comillas simples</h3>
        <div class="code">
            &lt;meta property="fc:miniapp" content='{"version":"1","image":"https://flashsend-cdmx.vercel.app/preview-image.png","button":{"text":"Abrir FlashSend"}}' /&gt;
        </div>
        <div class="status info">Formato: JSON con comillas simples externas</div>
    </div>
    
    <div class="test">
        <h3>Test 3: Entidades HTML</h3>
        <div class="code">
            &lt;meta property="fc:miniapp" content="&#123;&quot;version&quot;:&quot;1&quot;,&quot;image&quot;:&quot;https://flashsend-cdmx.vercel.app/preview-image.png&quot;,&quot;button&quot;:&#123;&quot;text&quot;:&quot;Abrir FlashSend&quot;&#125;&#125;" /&gt;
        </div>
        <div class="status info">Formato: JSON con entidades HTML completas</div>
    </div>
    
    <div class="test">
        <h3>Instrucciones de Prueba</h3>
        <ol>
            <li>Ve a <a href="https://farcaster.xyz/~/developers/mini-apps/manifest" target="_blank">Farcaster Mini App Manifest</a></li>
            <li>Ingresa el dominio: <code>flashsend-cdmx.vercel.app</code></li>
            <li>Verifica si "Preview not available" persiste</li>
            <li>Si persiste, prueba con: <code>flashsend-cdmx.vercel.app/test-miniapp.html</code></li>
        </ol>
    </div>
    
    <script>
        // Verificar que los meta tags estÃ©n presentes
        document.addEventListener('DOMContentLoaded', function() {
            const metaTags = document.querySelectorAll('meta[property="fc:miniapp"]');
            console.log('Meta tags fc:miniapp encontrados:', metaTags.length);
            
            metaTags.forEach((tag, index) => {
                console.log(`Test ${index + 1}:`, tag.getAttribute('content'));
            });
        });
    </script>
</body>
</html>
